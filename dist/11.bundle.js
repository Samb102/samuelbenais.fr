(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{35:function(e,t,n){"use strict";n.r(t);var r=n(11),o=n.n(r),p=n(3),a=n.n(p),s=n(0),i=n.n(s),c=n(4),d=n.n(c),u=n(1),l=n.n(u),f=n(2),h=n(7),m=n(8),v=n.n(m),y=v()(),w=v()(),N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,l()(i()(t),"referenceNode",void 0),l()(i()(t),"setReferenceNode",(function(e){e&&t.referenceNode!==e&&(t.referenceNode=e,t.forceUpdate())})),t}d()(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.referenceNode=null},n.render=function(){return f.createElement(y.Provider,{value:this.referenceNode},f.createElement(w.Provider,{value:this.setReferenceNode},this.props.children))},t}(f.Component),E=function(e){return Array.isArray(e)?e[0]:e},P=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},b=function(e,t){if("function"==typeof e)return P(e,t);null!=e&&(e.current=t)},g={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},I={},S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,l()(i()(t),"state",{data:void 0,placement:void 0}),l()(i()(t),"popperInstance",void 0),l()(i()(t),"popperNode",null),l()(i()(t),"arrowNode",null),l()(i()(t),"setPopperNode",(function(e){e&&t.popperNode!==e&&(b(t.props.innerRef,e),t.popperNode=e,t.updatePopperInstance())})),l()(i()(t),"setArrowNode",(function(e){t.arrowNode=e})),l()(i()(t),"updateStateModifier",{enabled:!0,order:900,fn:function(e){var n=e.placement;return t.setState({data:e,placement:n}),e}}),l()(i()(t),"getOptions",(function(){return{placement:t.props.placement,eventsEnabled:t.props.eventsEnabled,positionFixed:t.props.positionFixed,modifiers:a()({},t.props.modifiers,{arrow:a()({},t.props.modifiers&&t.props.modifiers.arrow,{enabled:!!t.arrowNode,element:t.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:t.updateStateModifier})}})),l()(i()(t),"getPopperStyle",(function(){return t.popperNode&&t.state.data?a()({position:t.state.data.offsets.popper.position},t.state.data.styles):g})),l()(i()(t),"getPopperPlacement",(function(){return t.state.data?t.state.placement:void 0})),l()(i()(t),"getArrowStyle",(function(){return t.arrowNode&&t.state.data?t.state.data.arrowStyles:I})),l()(i()(t),"getOutOfBoundariesState",(function(){return t.state.data?t.state.data.hide:void 0})),l()(i()(t),"destroyPopperInstance",(function(){t.popperInstance&&(t.popperInstance.destroy(),t.popperInstance=null)})),l()(i()(t),"updatePopperInstance",(function(){t.destroyPopperInstance();var e=i()(t).popperNode,n=t.props.referenceElement;n&&e&&(t.popperInstance=new h.a(n,e,t.getOptions()))})),l()(i()(t),"scheduleUpdate",(function(){t.popperInstance&&t.popperInstance.scheduleUpdate()})),t}d()(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){this.props.placement!==e.placement||this.props.referenceElement!==e.referenceElement||this.props.positionFixed!==e.positionFixed||this.props.modifiers!==e.modifiers?this.updatePopperInstance():this.props.eventsEnabled!==e.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()),t.placement!==this.state.placement&&this.scheduleUpdate()},n.componentWillUnmount=function(){b(this.props.innerRef,null),this.destroyPopperInstance()},n.render=function(){return E(this.props.children)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}})},t}(f.Component);l()(S,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});var R=h.a.placements;function A(e){var t=e.referenceElement,n=o()(e,["referenceElement"]);return f.createElement(y.Consumer,null,(function(e){return f.createElement(S,a()({referenceElement:void 0!==t?t:e},n))}))}var U=n(6),O=n.n(U),x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,l()(i()(t),"refHandler",(function(e){b(t.props.innerRef,e),P(t.props.setReferenceNode,e)})),t}d()(t,e);var n=t.prototype;return n.componentWillUnmount=function(){b(this.props.innerRef,null)},n.render=function(){return O()(Boolean(this.props.setReferenceNode),"`Reference` should not be used outside of a `Manager` component."),E(this.props.children)({ref:this.refHandler})},t}(f.Component);function C(e){return f.createElement(w.Consumer,null,(function(t){return f.createElement(x,a()({setReferenceNode:t},e))}))}n.d(t,"Popper",(function(){return A})),n.d(t,"placements",(function(){return R})),n.d(t,"Manager",(function(){return N})),n.d(t,"Reference",(function(){return C}))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtcG9wcGVyL2xpYi9lc20vTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtcG9wcGVyL2xpYi9lc20vdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LXBvcHBlci9saWIvZXNtL1BvcHBlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtcG9wcGVyL2xpYi9lc20vUmVmZXJlbmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1wb3BwZXIvbGliL2VzbS9pbmRleC5qcyJdLCJuYW1lcyI6WyJNYW5hZ2VyUmVmZXJlbmNlTm9kZUNvbnRleHQiLCJNYW5hZ2VyUmVmZXJlbmNlTm9kZVNldHRlckNvbnRleHQiLCJfUmVhY3QkQ29tcG9uZW50IiwiTWFuYWdlciIsIl90aGlzIiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwiY29uY2F0IiwibmV3UmVmZXJlbmNlTm9kZSIsInJlZmVyZW5jZU5vZGUiLCJmb3JjZVVwZGF0ZSIsIl9wcm90byIsInByb3RvdHlwZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwicmVuZGVyIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsInNldFJlZmVyZW5jZU5vZGUiLCJwcm9wcyIsImNoaWxkcmVuIiwidW53cmFwQXJyYXkiLCJhcmciLCJpc0FycmF5Iiwic2FmZUludm9rZSIsImZuIiwic2V0UmVmIiwicmVmIiwibm9kZSIsImN1cnJlbnQiLCJpbml0aWFsU3R5bGUiLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJvcGFjaXR5IiwicG9pbnRlckV2ZW50cyIsImluaXRpYWxBcnJvd1N0eWxlIiwiSW5uZXJQb3BwZXIiLCJkYXRhIiwidW5kZWZpbmVkIiwicGxhY2VtZW50IiwicG9wcGVyTm9kZSIsImlubmVyUmVmIiwidXBkYXRlUG9wcGVySW5zdGFuY2UiLCJhcnJvd05vZGUiLCJlbmFibGVkIiwib3JkZXIiLCJzZXRTdGF0ZSIsImV2ZW50c0VuYWJsZWQiLCJwb3NpdGlvbkZpeGVkIiwibW9kaWZpZXJzIiwiYXJyb3ciLCJlbGVtZW50IiwiYXBwbHlTdHlsZSIsInVwZGF0ZVN0YXRlTW9kaWZpZXIiLCJzdGF0ZSIsIm9mZnNldHMiLCJwb3BwZXIiLCJzdHlsZXMiLCJhcnJvd1N0eWxlcyIsImhpZGUiLCJwb3BwZXJJbnN0YW5jZSIsImRlc3Ryb3kiLCJkZXN0cm95UG9wcGVySW5zdGFuY2UiLCJyZWZlcmVuY2VFbGVtZW50IiwiZ2V0T3B0aW9ucyIsInNjaGVkdWxlVXBkYXRlIiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwicHJldlN0YXRlIiwiZW5hYmxlRXZlbnRMaXN0ZW5lcnMiLCJkaXNhYmxlRXZlbnRMaXN0ZW5lcnMiLCJzZXRQb3BwZXJOb2RlIiwic3R5bGUiLCJnZXRQb3BwZXJTdHlsZSIsImdldFBvcHBlclBsYWNlbWVudCIsIm91dE9mQm91bmRhcmllcyIsImdldE91dE9mQm91bmRhcmllc1N0YXRlIiwiYXJyb3dQcm9wcyIsInNldEFycm93Tm9kZSIsImdldEFycm93U3R5bGUiLCJwbGFjZW1lbnRzIiwiUG9wcGVyIiwiX3JlZiIsIkNvbnN1bWVyIiwiSW5uZXJSZWZlcmVuY2UiLCJCb29sZWFuIiwicmVmSGFuZGxlciIsIlJlZmVyZW5jZSJdLCJtYXBwaW5ncyI6Im9OQUtXQSxFQUE4QixNQUM5QkMsRUFBb0MsTUFFM0MsRUFFSixTQUFVQyxHQUdSLFNBQVNDLElBR1AsSUFGQSxJQUFJQyxFQUVLQyxFQUFPQyxVQUFVQyxPQUFRQyxFQUFPLElBQUlDLE1BQU1KLEdBQU9LLEVBQU8sRUFBR0EsRUFBT0wsRUFBTUssSUFDL0VGLEVBQUtFLEdBQVFKLFVBQVVJLEdBZXpCLE9BWkFOLEVBQVFGLEVBQWlCUyxLQUFLQyxNQUFNVixFQUFrQixDQUFDVyxNQUFNQyxPQUFPTixL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VTFFLEdBQy9FLE9BQU8sZ0JBQW9CLEVBQWEsSUFBUyxDQUMvQ3NELHNCQUF1Q3pCLElBQXJCeUIsRUFBaUNBLEVBQW1CdEQsR0FDckVTLE8sb0JDNUxILEVBRUosU0FBVXZCLEdBR1IsU0FBU3lGLElBR1AsSUFGQSxJQUFJdkYsRUFFS0MsRUFBT0MsVUFBVUMsT0FBUUMsRUFBTyxJQUFJQyxNQUFNSixHQUFPSyxFQUFPLEVBQUdBLEVBQU9MLEVBQU1LLElBQy9FRixFQUFLRSxHQUFRSixVQUFVSSxHQVV6QixPQVBBTixFQUFRRixFQUFpQlMsS0FBS0MsTUFBTVYsRUFBa0IsQ0FBQ1csTUFBTUMsT0FBT04sS0FBVUssS0FFOUUsSUFBZ0IsSUFBdUJULEdBQVEsY0FBYyxTQUFVOEIsR0FDckVGLEVBQU81QixFQUFNcUIsTUFBTXVCLFNBQVVkLEdBQzdCSixFQUFXMUIsRUFBTXFCLE1BQU1ELGlCQUFrQlUsTUFHcEM5QixFQWhCVCxJQUFldUYsRUFBZ0J6RixHQW1CL0IsSUFBSWdCLEVBQVN5RSxFQUFleEUsVUFhNUIsT0FYQUQsRUFBT0UscUJBQXVCLFdBQzVCWSxFQUFPbkIsS0FBS1ksTUFBTXVCLFNBQVUsT0FHOUI5QixFQUFPRyxPQUFTLFdBRWQsT0FEQSxJQUFRdUUsUUFBUS9FLEtBQUtZLE1BQU1ELGtCQUFtQixvRUFDdkNHLEVBQVlkLEtBQUtZLE1BQU1DLFNBQXZCQyxDQUFpQyxDQUN0Q00sSUFBS3BCLEtBQUtnRixjQUlQRixFQWpDVCxDQWtDRSxhQUVhLFNBQVNHLEVBQVVyRSxHQUNoQyxPQUFPLGdCQUFvQnhCLEVBQWtDeUYsU0FBVSxNQUFNLFNBQVVsRSxHQUNyRixPQUFPLGdCQUFvQixFQUFnQixJQUFTLENBQ2xEQSxpQkFBa0JBLEdBQ2pCQyxPQ25EUCIsImZpbGUiOiIxMS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIjtcbmltcG9ydCBfaW5oZXJpdHNMb29zZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0c0xvb3NlXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3JlYXRlQ29udGV4dCBmcm9tICdjcmVhdGUtcmVhY3QtY29udGV4dCc7XG5leHBvcnQgdmFyIE1hbmFnZXJSZWZlcmVuY2VOb2RlQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKTtcbmV4cG9ydCB2YXIgTWFuYWdlclJlZmVyZW5jZU5vZGVTZXR0ZXJDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xuXG52YXIgTWFuYWdlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShNYW5hZ2VyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBNYW5hZ2VyKCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBfdGhpcyA9IF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSB8fCB0aGlzO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInJlZmVyZW5jZU5vZGVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJzZXRSZWZlcmVuY2VOb2RlXCIsIGZ1bmN0aW9uIChuZXdSZWZlcmVuY2VOb2RlKSB7XG4gICAgICBpZiAobmV3UmVmZXJlbmNlTm9kZSAmJiBfdGhpcy5yZWZlcmVuY2VOb2RlICE9PSBuZXdSZWZlcmVuY2VOb2RlKSB7XG4gICAgICAgIF90aGlzLnJlZmVyZW5jZU5vZGUgPSBuZXdSZWZlcmVuY2VOb2RlO1xuXG4gICAgICAgIF90aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTWFuYWdlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5yZWZlcmVuY2VOb2RlID0gbnVsbDtcbiAgfTtcblxuICBfcHJvdG8ucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KE1hbmFnZXJSZWZlcmVuY2VOb2RlQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgdmFsdWU6IHRoaXMucmVmZXJlbmNlTm9kZVxuICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWFuYWdlclJlZmVyZW5jZU5vZGVTZXR0ZXJDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICB2YWx1ZTogdGhpcy5zZXRSZWZlcmVuY2VOb2RlXG4gICAgfSwgdGhpcy5wcm9wcy5jaGlsZHJlbikpO1xuICB9O1xuXG4gIHJldHVybiBNYW5hZ2VyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5leHBvcnQgeyBNYW5hZ2VyIGFzIGRlZmF1bHQgfTsiLCIvKipcbiAqIFRha2VzIGFuIGFyZ3VtZW50IGFuZCBpZiBpdCdzIGFuIGFycmF5LCByZXR1cm5zIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBhcnJheSxcbiAqIG90aGVyd2lzZSByZXR1cm5zIHRoZSBhcmd1bWVudC4gVXNlZCBmb3IgUHJlYWN0IGNvbXBhdGliaWxpdHkuXG4gKi9cbmV4cG9ydCB2YXIgdW53cmFwQXJyYXkgPSBmdW5jdGlvbiB1bndyYXBBcnJheShhcmcpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJnKSA/IGFyZ1swXSA6IGFyZztcbn07XG4vKipcbiAqIFRha2VzIGEgbWF5YmUtdW5kZWZpbmVkIGZ1bmN0aW9uIGFuZCBhcmJpdHJhcnkgYXJncyBhbmQgaW52b2tlcyB0aGUgZnVuY3Rpb25cbiAqIG9ubHkgaWYgaXQgaXMgZGVmaW5lZC5cbiAqL1xuXG5leHBvcnQgdmFyIHNhZmVJbnZva2UgPSBmdW5jdGlvbiBzYWZlSW52b2tlKGZuKSB7XG4gIGlmICh0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBmbi5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICB9XG59O1xuLyoqXG4gKiBEb2VzIGEgc2hhbGxvdyBlcXVhbGl0eSBjaGVjayBvZiB0d28gb2JqZWN0cyBieSBjb21wYXJpbmcgdGhlIHJlZmVyZW5jZVxuICogZXF1YWxpdHkgb2YgZWFjaCB2YWx1ZS5cbiAqL1xuXG5leHBvcnQgdmFyIHNoYWxsb3dFcXVhbCA9IGZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBLCBvYmpCKSB7XG4gIHZhciBhS2V5cyA9IE9iamVjdC5rZXlzKG9iakEpO1xuICB2YXIgYktleXMgPSBPYmplY3Qua2V5cyhvYmpCKTtcblxuICBpZiAoYktleXMubGVuZ3RoICE9PSBhS2V5cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGJLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGFLZXlzW2ldO1xuXG4gICAgaWYgKG9iakFba2V5XSAhPT0gb2JqQltrZXldKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG4gKiBTZXRzIGEgcmVmIHVzaW5nIGVpdGhlciBhIHJlZiBjYWxsYmFjayBvciBhIHJlZiBvYmplY3RcbiAqL1xuXG5leHBvcnQgdmFyIHNldFJlZiA9IGZ1bmN0aW9uIHNldFJlZihyZWYsIG5vZGUpIHtcbiAgLy8gaWYgaXRzIGEgZnVuY3Rpb24gY2FsbCBpdFxuICBpZiAodHlwZW9mIHJlZiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHNhZmVJbnZva2UocmVmLCBub2RlKTtcbiAgfSAvLyBvdGhlcndpc2Ugd2Ugc2hvdWxkIHRyZWF0IGl0IGFzIGEgcmVmIG9iamVjdFxuICBlbHNlIGlmIChyZWYgIT0gbnVsbCkge1xuICAgICAgcmVmLmN1cnJlbnQgPSBub2RlO1xuICAgIH1cbn07IiwiaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIjtcbmltcG9ydCBfaW5oZXJpdHNMb29zZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0c0xvb3NlXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUG9wcGVySlMgZnJvbSAncG9wcGVyLmpzJztcbmltcG9ydCB7IE1hbmFnZXJSZWZlcmVuY2VOb2RlQ29udGV4dCB9IGZyb20gJy4vTWFuYWdlcic7XG5pbXBvcnQgeyB1bndyYXBBcnJheSwgc2V0UmVmLCBzaGFsbG93RXF1YWwgfSBmcm9tICcuL3V0aWxzJztcbnZhciBpbml0aWFsU3R5bGUgPSB7XG4gIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICB0b3A6IDAsXG4gIGxlZnQ6IDAsXG4gIG9wYWNpdHk6IDAsXG4gIHBvaW50ZXJFdmVudHM6ICdub25lJ1xufTtcbnZhciBpbml0aWFsQXJyb3dTdHlsZSA9IHt9O1xuZXhwb3J0IHZhciBJbm5lclBvcHBlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShJbm5lclBvcHBlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gSW5uZXJQb3BwZXIoKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIF90aGlzID0gX1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsIFt0aGlzXS5jb25jYXQoYXJncykpIHx8IHRoaXM7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic3RhdGVcIiwge1xuICAgICAgZGF0YTogdW5kZWZpbmVkLFxuICAgICAgcGxhY2VtZW50OiB1bmRlZmluZWRcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJwb3BwZXJJbnN0YW5jZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInBvcHBlck5vZGVcIiwgbnVsbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiYXJyb3dOb2RlXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInNldFBvcHBlck5vZGVcIiwgZnVuY3Rpb24gKHBvcHBlck5vZGUpIHtcbiAgICAgIGlmICghcG9wcGVyTm9kZSB8fCBfdGhpcy5wb3BwZXJOb2RlID09PSBwb3BwZXJOb2RlKSByZXR1cm47XG4gICAgICBzZXRSZWYoX3RoaXMucHJvcHMuaW5uZXJSZWYsIHBvcHBlck5vZGUpO1xuICAgICAgX3RoaXMucG9wcGVyTm9kZSA9IHBvcHBlck5vZGU7XG5cbiAgICAgIF90aGlzLnVwZGF0ZVBvcHBlckluc3RhbmNlKCk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic2V0QXJyb3dOb2RlXCIsIGZ1bmN0aW9uIChhcnJvd05vZGUpIHtcbiAgICAgIF90aGlzLmFycm93Tm9kZSA9IGFycm93Tm9kZTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJ1cGRhdGVTdGF0ZU1vZGlmaWVyXCIsIHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBvcmRlcjogOTAwLFxuICAgICAgZm46IGZ1bmN0aW9uIGZuKGRhdGEpIHtcbiAgICAgICAgdmFyIHBsYWNlbWVudCA9IGRhdGEucGxhY2VtZW50O1xuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImdldE9wdGlvbnNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGxhY2VtZW50OiBfdGhpcy5wcm9wcy5wbGFjZW1lbnQsXG4gICAgICAgIGV2ZW50c0VuYWJsZWQ6IF90aGlzLnByb3BzLmV2ZW50c0VuYWJsZWQsXG4gICAgICAgIHBvc2l0aW9uRml4ZWQ6IF90aGlzLnByb3BzLnBvc2l0aW9uRml4ZWQsXG4gICAgICAgIG1vZGlmaWVyczogX2V4dGVuZHMoe30sIF90aGlzLnByb3BzLm1vZGlmaWVycywge1xuICAgICAgICAgIGFycm93OiBfZXh0ZW5kcyh7fSwgX3RoaXMucHJvcHMubW9kaWZpZXJzICYmIF90aGlzLnByb3BzLm1vZGlmaWVycy5hcnJvdywge1xuICAgICAgICAgICAgZW5hYmxlZDogISFfdGhpcy5hcnJvd05vZGUsXG4gICAgICAgICAgICBlbGVtZW50OiBfdGhpcy5hcnJvd05vZGVcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBhcHBseVN0eWxlOiB7XG4gICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdXBkYXRlU3RhdGVNb2RpZmllcjogX3RoaXMudXBkYXRlU3RhdGVNb2RpZmllclxuICAgICAgICB9KVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJnZXRQb3BwZXJTdHlsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gIV90aGlzLnBvcHBlck5vZGUgfHwgIV90aGlzLnN0YXRlLmRhdGEgPyBpbml0aWFsU3R5bGUgOiBfZXh0ZW5kcyh7XG4gICAgICAgIHBvc2l0aW9uOiBfdGhpcy5zdGF0ZS5kYXRhLm9mZnNldHMucG9wcGVyLnBvc2l0aW9uXG4gICAgICB9LCBfdGhpcy5zdGF0ZS5kYXRhLnN0eWxlcyk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiZ2V0UG9wcGVyUGxhY2VtZW50XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAhX3RoaXMuc3RhdGUuZGF0YSA/IHVuZGVmaW5lZCA6IF90aGlzLnN0YXRlLnBsYWNlbWVudDtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJnZXRBcnJvd1N0eWxlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAhX3RoaXMuYXJyb3dOb2RlIHx8ICFfdGhpcy5zdGF0ZS5kYXRhID8gaW5pdGlhbEFycm93U3R5bGUgOiBfdGhpcy5zdGF0ZS5kYXRhLmFycm93U3R5bGVzO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImdldE91dE9mQm91bmRhcmllc1N0YXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy5zdGF0ZS5kYXRhID8gX3RoaXMuc3RhdGUuZGF0YS5oaWRlIDogdW5kZWZpbmVkO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImRlc3Ryb3lQb3BwZXJJbnN0YW5jZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIV90aGlzLnBvcHBlckluc3RhbmNlKSByZXR1cm47XG5cbiAgICAgIF90aGlzLnBvcHBlckluc3RhbmNlLmRlc3Ryb3koKTtcblxuICAgICAgX3RoaXMucG9wcGVySW5zdGFuY2UgPSBudWxsO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInVwZGF0ZVBvcHBlckluc3RhbmNlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmRlc3Ryb3lQb3BwZXJJbnN0YW5jZSgpO1xuXG4gICAgICB2YXIgX2Fzc2VydFRoaXNJbml0aWFsaXplID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksXG4gICAgICAgICAgcG9wcGVyTm9kZSA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZS5wb3BwZXJOb2RlO1xuXG4gICAgICB2YXIgcmVmZXJlbmNlRWxlbWVudCA9IF90aGlzLnByb3BzLnJlZmVyZW5jZUVsZW1lbnQ7XG4gICAgICBpZiAoIXJlZmVyZW5jZUVsZW1lbnQgfHwgIXBvcHBlck5vZGUpIHJldHVybjtcbiAgICAgIF90aGlzLnBvcHBlckluc3RhbmNlID0gbmV3IFBvcHBlckpTKHJlZmVyZW5jZUVsZW1lbnQsIHBvcHBlck5vZGUsIF90aGlzLmdldE9wdGlvbnMoKSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic2NoZWR1bGVVcGRhdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzLnBvcHBlckluc3RhbmNlKSB7XG4gICAgICAgIF90aGlzLnBvcHBlckluc3RhbmNlLnNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gSW5uZXJQb3BwZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAvLyBJZiB0aGUgUG9wcGVyLmpzIG9wdGlvbnMgaGF2ZSBjaGFuZ2VkLCB1cGRhdGUgdGhlIGluc3RhbmNlIChkZXN0cm95ICsgY3JlYXRlKVxuICAgIGlmICh0aGlzLnByb3BzLnBsYWNlbWVudCAhPT0gcHJldlByb3BzLnBsYWNlbWVudCB8fCB0aGlzLnByb3BzLnJlZmVyZW5jZUVsZW1lbnQgIT09IHByZXZQcm9wcy5yZWZlcmVuY2VFbGVtZW50IHx8IHRoaXMucHJvcHMucG9zaXRpb25GaXhlZCAhPT0gcHJldlByb3BzLnBvc2l0aW9uRml4ZWQgfHwgdGhpcy5wcm9wcy5tb2RpZmllcnMgIT09IHByZXZQcm9wcy5tb2RpZmllcnMpIHtcbiAgICAgIC8vIGRldmVsb3Agb25seSBjaGVjayB0aGF0IG1vZGlmaWVycyBpc24ndCBiZWluZyB1cGRhdGVkIG5lZWRsZXNzbHlcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGlmaWVycyAhPT0gcHJldlByb3BzLm1vZGlmaWVycyAmJiB0aGlzLnByb3BzLm1vZGlmaWVycyAhPSBudWxsICYmIHByZXZQcm9wcy5tb2RpZmllcnMgIT0gbnVsbCAmJiBzaGFsbG93RXF1YWwodGhpcy5wcm9wcy5tb2RpZmllcnMsIHByZXZQcm9wcy5tb2RpZmllcnMpKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiJ21vZGlmaWVycycgcHJvcCByZWZlcmVuY2UgdXBkYXRlZCBldmVuIHRob3VnaCBhbGwgdmFsdWVzIGFwcGVhciB0aGUgc2FtZS5cXG5Db25zaWRlciBtZW1vaXppbmcgdGhlICdtb2RpZmllcnMnIG9iamVjdCB0byBhdm9pZCBuZWVkbGVzcyByZW5kZXJpbmcuXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMudXBkYXRlUG9wcGVySW5zdGFuY2UoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuZXZlbnRzRW5hYmxlZCAhPT0gcHJldlByb3BzLmV2ZW50c0VuYWJsZWQgJiYgdGhpcy5wb3BwZXJJbnN0YW5jZSkge1xuICAgICAgdGhpcy5wcm9wcy5ldmVudHNFbmFibGVkID8gdGhpcy5wb3BwZXJJbnN0YW5jZS5lbmFibGVFdmVudExpc3RlbmVycygpIDogdGhpcy5wb3BwZXJJbnN0YW5jZS5kaXNhYmxlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9IC8vIEEgcGxhY2VtZW50IGRpZmZlcmVuY2UgaW4gc3RhdGUgbWVhbnMgcG9wcGVyIGRldGVybWluZWQgYSBuZXcgcGxhY2VtZW50XG4gICAgLy8gYXBhcnQgZnJvbSB0aGUgcHJvcHMgdmFsdWUuIEJ5IHRoZSB0aW1lIHRoZSBwb3BwZXIgZWxlbWVudCBpcyByZW5kZXJlZCB3aXRoXG4gICAgLy8gdGhlIG5ldyBwb3NpdGlvbiBQb3BwZXIgaGFzIGFscmVhZHkgbWVhc3VyZWQgaXQsIGlmIHRoZSBwbGFjZSBjaGFuZ2UgdHJpZ2dlcnNcbiAgICAvLyBhIHNpemUgY2hhbmdlIGl0IHdpbGwgcmVzdWx0IGluIGEgbWlzYWxpZ25lZCBwb3BwZXIuIFNvIHdlIHNjaGVkdWxlIGFuIHVwZGF0ZSB0byBiZSBzdXJlLlxuXG5cbiAgICBpZiAocHJldlN0YXRlLnBsYWNlbWVudCAhPT0gdGhpcy5zdGF0ZS5wbGFjZW1lbnQpIHtcbiAgICAgIHRoaXMuc2NoZWR1bGVVcGRhdGUoKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgc2V0UmVmKHRoaXMucHJvcHMuaW5uZXJSZWYsIG51bGwpO1xuICAgIHRoaXMuZGVzdHJveVBvcHBlckluc3RhbmNlKCk7XG4gIH07XG5cbiAgX3Byb3RvLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gdW53cmFwQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbikoe1xuICAgICAgcmVmOiB0aGlzLnNldFBvcHBlck5vZGUsXG4gICAgICBzdHlsZTogdGhpcy5nZXRQb3BwZXJTdHlsZSgpLFxuICAgICAgcGxhY2VtZW50OiB0aGlzLmdldFBvcHBlclBsYWNlbWVudCgpLFxuICAgICAgb3V0T2ZCb3VuZGFyaWVzOiB0aGlzLmdldE91dE9mQm91bmRhcmllc1N0YXRlKCksXG4gICAgICBzY2hlZHVsZVVwZGF0ZTogdGhpcy5zY2hlZHVsZVVwZGF0ZSxcbiAgICAgIGFycm93UHJvcHM6IHtcbiAgICAgICAgcmVmOiB0aGlzLnNldEFycm93Tm9kZSxcbiAgICAgICAgc3R5bGU6IHRoaXMuZ2V0QXJyb3dTdHlsZSgpXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIElubmVyUG9wcGVyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5fZGVmaW5lUHJvcGVydHkoSW5uZXJQb3BwZXIsIFwiZGVmYXVsdFByb3BzXCIsIHtcbiAgcGxhY2VtZW50OiAnYm90dG9tJyxcbiAgZXZlbnRzRW5hYmxlZDogdHJ1ZSxcbiAgcmVmZXJlbmNlRWxlbWVudDogdW5kZWZpbmVkLFxuICBwb3NpdGlvbkZpeGVkOiBmYWxzZVxufSk7XG5cbnZhciBwbGFjZW1lbnRzID0gUG9wcGVySlMucGxhY2VtZW50cztcbmV4cG9ydCB7IHBsYWNlbWVudHMgfTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBvcHBlcihfcmVmKSB7XG4gIHZhciByZWZlcmVuY2VFbGVtZW50ID0gX3JlZi5yZWZlcmVuY2VFbGVtZW50LFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJyZWZlcmVuY2VFbGVtZW50XCJdKTtcblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChNYW5hZ2VyUmVmZXJlbmNlTm9kZUNvbnRleHQuQ29uc3VtZXIsIG51bGwsIGZ1bmN0aW9uIChyZWZlcmVuY2VOb2RlKSB7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5uZXJQb3BwZXIsIF9leHRlbmRzKHtcbiAgICAgIHJlZmVyZW5jZUVsZW1lbnQ6IHJlZmVyZW5jZUVsZW1lbnQgIT09IHVuZGVmaW5lZCA/IHJlZmVyZW5jZUVsZW1lbnQgOiByZWZlcmVuY2VOb2RlXG4gICAgfSwgcHJvcHMpKTtcbiAgfSk7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2Fzc2VydFRoaXNJbml0aWFsaXplZFwiO1xuaW1wb3J0IF9pbmhlcml0c0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzTG9vc2VcIjtcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB3YXJuaW5nIGZyb20gJ3dhcm5pbmcnO1xuaW1wb3J0IHsgTWFuYWdlclJlZmVyZW5jZU5vZGVTZXR0ZXJDb250ZXh0IH0gZnJvbSAnLi9NYW5hZ2VyJztcbmltcG9ydCB7IHNhZmVJbnZva2UsIHVud3JhcEFycmF5LCBzZXRSZWYgfSBmcm9tICcuL3V0aWxzJztcblxudmFyIElubmVyUmVmZXJlbmNlID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKElubmVyUmVmZXJlbmNlLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBJbm5lclJlZmVyZW5jZSgpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkgfHwgdGhpcztcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJyZWZIYW5kbGVyXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBzZXRSZWYoX3RoaXMucHJvcHMuaW5uZXJSZWYsIG5vZGUpO1xuICAgICAgc2FmZUludm9rZShfdGhpcy5wcm9wcy5zZXRSZWZlcmVuY2VOb2RlLCBub2RlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBJbm5lclJlZmVyZW5jZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgc2V0UmVmKHRoaXMucHJvcHMuaW5uZXJSZWYsIG51bGwpO1xuICB9O1xuXG4gIF9wcm90by5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgd2FybmluZyhCb29sZWFuKHRoaXMucHJvcHMuc2V0UmVmZXJlbmNlTm9kZSksICdgUmVmZXJlbmNlYCBzaG91bGQgbm90IGJlIHVzZWQgb3V0c2lkZSBvZiBhIGBNYW5hZ2VyYCBjb21wb25lbnQuJyk7XG4gICAgcmV0dXJuIHVud3JhcEFycmF5KHRoaXMucHJvcHMuY2hpbGRyZW4pKHtcbiAgICAgIHJlZjogdGhpcy5yZWZIYW5kbGVyXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIElubmVyUmVmZXJlbmNlO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSZWZlcmVuY2UocHJvcHMpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWFuYWdlclJlZmVyZW5jZU5vZGVTZXR0ZXJDb250ZXh0LkNvbnN1bWVyLCBudWxsLCBmdW5jdGlvbiAoc2V0UmVmZXJlbmNlTm9kZSkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KElubmVyUmVmZXJlbmNlLCBfZXh0ZW5kcyh7XG4gICAgICBzZXRSZWZlcmVuY2VOb2RlOiBzZXRSZWZlcmVuY2VOb2RlXG4gICAgfSwgcHJvcHMpKTtcbiAgfSk7XG59IiwiLy8gUHVibGljIGNvbXBvbmVudHNcbmltcG9ydCBQb3BwZXIsIHsgcGxhY2VtZW50cyB9IGZyb20gJy4vUG9wcGVyJztcbmltcG9ydCBNYW5hZ2VyIGZyb20gJy4vTWFuYWdlcic7XG5pbXBvcnQgUmVmZXJlbmNlIGZyb20gJy4vUmVmZXJlbmNlJztcbmV4cG9ydCB7IFBvcHBlciwgcGxhY2VtZW50cywgTWFuYWdlciwgUmVmZXJlbmNlIH07IC8vIFB1YmxpYyB0eXBlcyJdLCJzb3VyY2VSb290IjoiIn0=